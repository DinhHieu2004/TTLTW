Index: src/main/java/com/example/web/controller/LoginController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.web.controller;\n\nimport com.example.web.service.AuthService;\nimport jakarta.servlet.*;\nimport jakarta.servlet.http.*;\nimport jakarta.servlet.annotation.*;\n\nimport java.io.IOException;\nimport java.sql.SQLException;\n\n@WebServlet(name = \"loginController\", value = \"/login\")\npublic class LoginController extends HttpServlet {\n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        // Chuyển hướng về trang login (index.jsp)\n        request.getRequestDispatcher(\"index.jsp\").forward(request, response);\n    }\n\n    @Override\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        String username = request.getParameter(\"username\");\n        String password = request.getParameter(\"password\");\n\n        AuthService service = new AuthService();\n        try {\n            if (service.checkLogin(username, password)) {\n                response.sendRedirect(\"index.jsp\");\n            } else {\n                request.setAttribute(\"errorMessage\", \"Đăng nhập không thành công. Vui lòng thử lại.\");\n                request.setAttribute(\"username\", username); // Giữ lại username để hiển thị lại\n                request.getRequestDispatcher(\"index.jsp\").forward(request, response);\n            }\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/com/example/web/controller/LoginController.java b/src/main/java/com/example/web/controller/LoginController.java
--- a/src/main/java/com/example/web/controller/LoginController.java	(revision a9eff0f655edb85048040bc36ab68d9b95a42879)
+++ b/src/main/java/com/example/web/controller/LoginController.java	(date 1734840361468)
@@ -10,29 +10,32 @@
 
 @WebServlet(name = "loginController", value = "/login")
 public class LoginController extends HttpServlet {
-    @Override
-    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
-        // Chuyển hướng về trang login (index.jsp)
-        request.getRequestDispatcher("index.jsp").forward(request, response);
-    }
-
     @Override
     protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
+        // Lấy thông tin từ form
         String username = request.getParameter("username");
         String password = request.getParameter("password");
 
+        // Gọi service kiểm tra đăng nhập
         AuthService service = new AuthService();
         try {
             if (service.checkLogin(username, password)) {
+                // Nếu đăng nhập thành công, chuyển hướng đến trang chính
                 response.sendRedirect("index.jsp");
             } else {
-                request.setAttribute("errorMessage", "Đăng nhập không thành công. Vui lòng thử lại.");
-                request.setAttribute("username", username); // Giữ lại username để hiển thị lại
+                // Nếu đăng nhập thất bại, trả về form đăng nhập cùng thông báo lỗi
+                request.setAttribute("errorMessage", "Tên đăng nhập hoặc mật khẩu không đúng!");
+                request.setAttribute("username", username); // Giữ lại tên đăng nhập
                 request.getRequestDispatcher("index.jsp").forward(request, response);
             }
         } catch (SQLException e) {
             throw new RuntimeException(e);
         }
     }
+
+    @Override
+    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
+        // Chuyển hướng về trang login (index.jsp)
+        request.getRequestDispatcher("index.jsp").forward(request, response);
+    }
 }
-
Index: src/main/java/com/example/web/dao/UserDao.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.web.dao;\n\nimport com.example.web.dao.db.DbConnect;\nimport com.example.web.dao.model.User;\n\nimport javax.management.relation.Role;\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class UserDao {\n    private Connection con = DbConnect.getConnection();\n\n    public User findUsername(String username) throws SQLException {\n        String sql = \"SELECT * FROM users WHERE username = ?\";\n        PreparedStatement ps = con.prepareStatement(sql);\n        ResultSet rs = ps.executeQuery();\n\n        if (rs.next()) {\n            int id = rs.getInt(\"id\");\n            String fullname = rs.getString(\"fullName\");\n            String uname = rs.getString(\"username\");\n            String password = rs.getString(\"password\");\n            String address = rs.getString(\"address\");\n            String email = rs.getString(\"email\");\n            String phone = rs.getString(\"phone\");\n\n            String roleString = rs.getString(\"role\");\n            User.Role role = User.Role.valueOf(roleString);\n\n            return new User(id, fullname, uname, password, address, email, phone, role);\n        }\n        return null;\n    }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/com/example/web/dao/UserDao.java b/src/main/java/com/example/web/dao/UserDao.java
--- a/src/main/java/com/example/web/dao/UserDao.java	(revision a9eff0f655edb85048040bc36ab68d9b95a42879)
+++ b/src/main/java/com/example/web/dao/UserDao.java	(date 1734840361469)
@@ -17,6 +17,7 @@
     public User findUsername(String username) throws SQLException {
         String sql = "SELECT * FROM users WHERE username = ?";
         PreparedStatement ps = con.prepareStatement(sql);
+        ps.setString(1, username);
         ResultSet rs = ps.executeQuery();
 
         if (rs.next()) {
Index: src/main/webapp/partials/authModal.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\n<div class=\"modal fade\" id=\"authModal\" tabindex=\"-1\" data-bs-backdrop=\"static\">\n    <div class=\"modal-dialog modal-dialog-centered\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h5 class=\"modal-title\" id=\"authModalLabel\">Đăng Nhập / Đăng Ký</h5>\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n            </div>\n            <div class=\"modal-body\">\n                <!-- Tabs for Login and Register -->\n                <ul class=\"nav nav-tabs\" id=\"authTabs\" role=\"tablist\">\n                    <li class=\"nav-item\" role=\"presentation\">\n                        <button class=\"nav-link active \" id=\"login-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#login\"\n                            type=\"button\" role=\"tab\" aria-controls=\"login\" aria-selected=\"true\">Đăng Nhập</button>\n                    </li>\n                    <li class=\"nav-item\" role=\"presentation\">\n                        <button class=\"nav-link\" id=\"register-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#register\"\n                            type=\"button\" role=\"tab\" aria-controls=\"register\" aria-selected=\"false\">Đăng Ký</button>\n                    </li>\n                </ul>\n\n                <div class=\"tab-content mt-3\" id=\"authTabsContent\">\n                    <!-- Login Form -->\n                    <div class=\"tab-pane fade show active\" id=\"login\" role=\"tabpanel\" aria-labelledby=\"login-tab\">\n                        <form id=\"loginForm\" method=\"post\" action=\"login\">\n                            <div class=\"mb-3\">\n                                <label for=\"username\" class=\"form-label\">Tên đăng nhập</label>\n                                <input type=\"text\" class=\"form-control\" id=\"username\"\n                                    placeholder=\"Nhập tên đăng nhập của bạn\" required>\n                            </div>\n                            <div class=\"mb-3\">\n                                <label for=\"loginPassword\" class=\"form-label\">Mật khẩu</label>\n                                <input type=\"password\" class=\"form-control\" id=\"loginPassword\"\n                                    placeholder=\"Nhập mật khẩu\" required>\n                            </div>\n                            <button type=\"submit\" class=\"btn btn-primary w-100 login-btn\">Đăng Nhập</button>\n                        </form>\n                    </div>\n\n                    <!-- Register Form -->\n                    <div class=\"tab-pane fade\" id=\"register\" role=\"tabpanel\" aria-labelledby=\"register-tab\">\n                        <form id=\"registerForm\">\n                            <div class=\"row mb-3\">\n                                <div class=\"col-md-6\">\n                                    <label for=\"registerName\" class=\"form-label\">Họ và Tên</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"registerName\" placeholder=\"Nhập họ và tên của bạn\" required>\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <label for=\"registerUsername\" class=\"form-label\">Tên đăng nhập</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"registerUsername\" placeholder=\"Nhập tên đăng nhập\" required>\n                                </div>\n                            </div>\n                    \n                            <div class=\"row mb-3\">\n                                <div class=\"col-md-6\">\n                                    <label for=\"registerPhone\" class=\"form-label\">Số điện thoại</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"registerPhone\" placeholder=\"Nhập số điện thoại\" required>\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <label for=\"registerEmail\" class=\"form-label\">Email</label>\n                                    <input type=\"email\" class=\"form-control\" id=\"registerEmail\" placeholder=\"Nhập email của bạn\" required>\n                                </div>\n                            </div>\n                    \n                            <div class=\"row mb-3\">\n                                <div class=\"col-md-6\">\n                                    <label for=\"registerAddress\" class=\"form-label\">Địa chỉ</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"registerAddress\" placeholder=\"Nhập địa chỉ của bạn\" required>\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <label for=\"registerPassword\" class=\"form-label\">Mật khẩu</label>\n                                    <input type=\"password\" class=\"form-control\" id=\"registerPassword\" placeholder=\"Tạo mật khẩu\" required>\n                                </div>\n                            </div>\n                    \n                            <div class=\"row mb-3\">\n                                <div class=\"col-md-6\">\n                                    <label for=\"ConfirmRegisterPassword\" class=\"form-label\">Nhập lại mật khẩu</label>\n                                    <input type=\"password\" class=\"form-control\" id=\"ConfirmRegisterPassword\" placeholder=\"Nhập lại mật khẩu\" required>\n                                </div>\n                            </div>\n                    \n                            <button type=\"submit\" class=\"btn btn-success w-100 login-btn\">Đăng Ký</button>\n                        </form>\n                    </div>\n                    <div class=\"tab-pane fade\" id=\"register\" role=\"tabpanel\" aria-labelledby=\"register-tab\">\n                        <form id=\"registerForm\">\n                            <div class=\"row mb-3\">\n                                <div class=\"col-md-6\">\n                                    <label for=\"registerName\" class=\"form-label\">Họ và Tên</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"registerName\" placeholder=\"Nhập họ và tên của bạn\" required>\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <label for=\"registerUsername\" class=\"form-label\">Tên đăng nhập</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"registerUsername\" placeholder=\"Nhập tên đăng nhập\" required>\n                                </div>\n                            </div>\n                    \n                            <div class=\"row mb-3\">\n                                <div class=\"col-md-6\">\n                                    <label for=\"registerPhone\" class=\"form-label\">Số điện thoại</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"registerPhone\" placeholder=\"Nhập số điện thoại\" required>\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <label for=\"registerEmail\" class=\"form-label\">Email</label>\n                                    <input type=\"email\" class=\"form-control\" id=\"registerEmail\" placeholder=\"Nhập email của bạn\" required>\n                                </div>\n                            </div>\n                    \n                            <div class=\"row mb-3\">\n                                <div class=\"col-md-6\">\n                                    <label for=\"registerPassword\" class=\"form-label\">Mật khẩu</label>\n                                    <input type=\"password\" class=\"form-control\" id=\"registerPassword\" placeholder=\"Tạo mật khẩu\" required>\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <label for=\"ConfirmRegisterPassword\" class=\"form-label\">Nhập lại mật khẩu</label>\n                                    <input type=\"password\" class=\"form-control\" id=\"ConfirmRegisterPassword\" placeholder=\"Nhập lại mật khẩu\" required>\n                                </div>\n                               \n                            </div>\n                    \n                            <div class=\"row mb-3\">\n                                 <div class=\"col-md-6\">\n                                    <label for=\"registerAddress\" class=\"form-label\">Địa chỉ</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"registerAddress\" placeholder=\"Nhập địa chỉ của bạn\" required>\n                                </div>\n                            </div>\n                    \n                            <button type=\"submit\" class=\"btn btn-success w-100 login-btn\">Đăng Ký</button>\n                        </form>\n                    </div>\n                                        \n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<script src=\"../assets/js/authModal.js\"></script>\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/partials/authModal.jsp b/src/main/webapp/partials/authModal.jsp
--- a/src/main/webapp/partials/authModal.jsp	(revision a9eff0f655edb85048040bc36ab68d9b95a42879)
+++ b/src/main/webapp/partials/authModal.jsp	(date 1734840361469)
@@ -21,6 +21,11 @@
 
                 <div class="tab-content mt-3" id="authTabsContent">
                     <!-- Login Form -->
+                    <c:if test="${not empty errorMessage}">
+                        <script type="text/javascript">
+                            alert("${errorMessage}");
+                        </script>
+                    </c:if>
                     <div class="tab-pane fade show active" id="login" role="tabpanel" aria-labelledby="login-tab">
                         <form id="loginForm" method="post" action="login">
                             <div class="mb-3">
